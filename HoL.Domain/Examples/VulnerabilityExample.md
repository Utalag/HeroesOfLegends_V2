# VulnerabilityProfil - Příklady použití

## Základní přehled

`VulnerabilityProfil` reprezentuje profil zranitelností, odolností a imunit bytosti vůči různým typům útoků. Používá `VulnerabilityType` enum s popisnými atributy.

### Struktura

- **VulnerabilityProfil** - hlavní třída obsahující:
  - `Vulnerabilities` - Dictionary zranitelností (modifikátor > 1.0)
  - `Resistances` - Dictionary odolností (modifikátor < 1.0)
  - `Immunities` - HashSet imunit (modifikátor = 0.0)

### VulnerabilityType enum

Obsahuje 15 kategorií útoků označených písmeny A-P:
- **A** - Fyzické útoky silou (tupé)
- **B** - Bodné a sečné útoky
- **C** - Magické zbraně
- **D** - Speciální zbraně (stříbro, zlato)
- **E** - Svěcená voda
- **F** - Elementy (oheň, mráz)
- **H** - Kyselina, alchymie
- **I** - Hraničářská kouzla I
- **J** - Hraničářská kouzla II
- **K** - Elementální kouzla
- **L** - Fyzická kouzla
- **M** - Mentální kouzla
- **N** - Blýskavá šipka
- **O** - Podrobování
- **P** - Mentální útok

---

## Příklad 1: Základní vytvoření - Lidský bojovník

```csharp
using HeroesOfLegends.DataLayer.Helpers;

var humanWarrior = new VulnerabilityProfil
{
    // Lidé nemají speciální zranitelnosti ani odolnosti
    Vulnerabilities = new Dictionary<VulnerabilityType, double>(),
    Resistances = new Dictionary<VulnerabilityType, double>(),
    Immunities = new HashSet<VulnerabilityType>()
};

// Testování základního poškození
double damage = 50;
double finalDamage = damage * humanWarrior.GetDamageMultiplier(VulnerabilityType.BluntForce);

Console.WriteLine($"Původní poškození: {damage}");
Console.WriteLine($"Finální poškození: {finalDamage}");  // 50 (1.0x modifikátor)
```

---

## Příklad 2: Nemrtvý (vampír) - Zranitelnosti a imunity

```csharp
var vampire = new VulnerabilityProfil
{
    // Zranitelnosti (bere více poškození)
    Vulnerabilities = new Dictionary<VulnerabilityType, double>
    {
        { VulnerabilityType.HolyWater, 2.0 },          // 200% poškození
        { VulnerabilityType.ElementalForce, 1.5 },     // 150% poškození (slunce/oheň)
        { VulnerabilityType.SpecificWeapon, 2.0 }      // 200% (dřevěný kůl, stříbro)
    },
    
    // Odolnosti (bere méně poškození)
    Resistances = new Dictionary<VulnerabilityType, double>
    {
        { VulnerabilityType.BluntForce, 0.5 },         // 50% poškození
        { VulnerabilityType.SharpForce, 0.75 }         // 75% poškození
    },
    
    // Imunity (nebere žádné poškození)
    Immunities = new HashSet<VulnerabilityType>
    {
        VulnerabilityType.MentalSpells,                // Imunní vůči mentálním kouzlům
        VulnerabilityType.AcidOrPotion                 // Imunní vůči jedům
    }
};

// Testování různých útoků
Console.WriteLine("=== Útok na vampíra ===");

// Svěcená voda
double holyWaterDamage = 30;
double finalHoly = holyWaterDamage * vampire.GetDamageMultiplier(VulnerabilityType.HolyWater);
Console.WriteLine($"Svěcená voda: {holyWaterDamage} → {finalHoly} (2x zranitelný)");

// Normální meč
double swordDamage = 40;
double finalSword = swordDamage * vampire.GetDamageMultiplier(VulnerabilityType.SharpForce);
Console.WriteLine($"Meč: {swordDamage} → {finalSword} (0.75x odolný)");

// Mentální kouzlo
double mentalDamage = 50;
double finalMental = mentalDamage * vampire.GetDamageMultiplier(VulnerabilityType.MentalSpells);
Console.WriteLine($"Mentální kouzlo: {mentalDamage} → {finalMental} (imunní)");

// Dřevěný kůl
double stakeDamage = 60;
double finalStake = stakeDamage * vampire.GetDamageMultiplier(VulnerabilityType.SpecificWeapon);
Console.WriteLine($"Dřevěný kůl: {stakeDamage} → {finalStake} (2x zranitelný)");
```

**Výstup:**
```
=== Útok na vampíra ===
Svěcená voda: 30 → 60 (2x zranitelný)
Meč: 40 → 30 (0.75x odolný)
Mentální kouzlo: 50 → 0 (imunní)
Dřevěný kůl: 60 → 120 (2x zranitelný)
```

---

## Příklad 3: Ohnivý elemental - Extrémní odolnosti

```csharp
var fireElemental = new VulnerabilityProfil
{
    Vulnerabilities = new Dictionary<VulnerabilityType, double>
    {
        { VulnerabilityType.ElementalSpells, 2.5 }     // 250% poškození od vodních kouzel
    },
    
    Resistances = new Dictionary<VulnerabilityType, double>
    {
        { VulnerabilityType.BluntForce, 0.25 },        // 25% - fyzické útoky málo účinné
        { VulnerabilityType.SharpForce, 0.25 },        // 25%
        { VulnerabilityType.PhysicalSpells, 0.5 }      // 50%
    },
    
    Immunities = new HashSet<VulnerabilityType>
    {
        VulnerabilityType.ElementalForce,               // Imunní vůči ohni
        VulnerabilityType.AcidOrPotion                  // Nemá tělesnou formu
    }
};

Console.WriteLine("=== Útok na ohnivého elementala ===");

// Meč
Console.WriteLine($"Meč (40 dmg): {40 * fireElemental.GetDamageMultiplier(VulnerabilityType.SharpForce)}");
// Ohnivé kouzlo
Console.WriteLine($"Ohnivé kouzlo (80 dmg): {80 * fireElemental.GetDamageMultiplier(VulnerabilityType.ElementalForce)}");
// Vodní kouzlo
Console.WriteLine($"Vodní kouzlo (60 dmg): {60 * fireElemental.GetDamageMultiplier(VulnerabilityType.ElementalSpells)}");
```

**Výstup:**
```
=== Útok na ohnivého elementala ===
Meč (40 dmg): 10
Ohnivé kouzlo (80 dmg): 0
Vodní kouzlo (60 dmg): 150
```

---

## Příklad 4: Démón - Komplexní profil

```csharp
var demon = new VulnerabilityProfil
{
    Vulnerabilities = new Dictionary<VulnerabilityType, double>
    {
        { VulnerabilityType.HolyWater, 3.0 },          // 300% - extrémně zranitelný
        { VulnerabilityType.SpecificWeapon, 2.0 },     // 200% - svěcené/stříbrné zbraně
        { VulnerabilityType.BlessedArrow, 2.5 }        // 250% - speciální útok
    },
    
    Resistances = new Dictionary<VulnerabilityType, double>
    {
        { VulnerabilityType.BluntForce, 0.5 },
        { VulnerabilityType.SharpForce, 0.5 },
        { VulnerabilityType.ElementalForce, 0.6 },     // Odolný vůči ohni
        { VulnerabilityType.MentalSpells, 0.3 }        // Velmi odolný vůči mentálním útokům
    },
    
    Immunities = new HashSet<VulnerabilityType>
    {
        VulnerabilityType.AcidOrPotion                  // Imunní vůči jedům
    }
};

// Komplexní test
var attacks = new[]
{
    ("Normální meč", 50, VulnerabilityType.SharpForce),
    ("Svěcený meč", 50, VulnerabilityType.SpecificWeapon),
    ("Svěcená voda", 30, VulnerabilityType.HolyWater),
    ("Ohnivé kouzlo", 60, VulnerabilityType.ElementalForce),
    ("Mentální útok", 40, VulnerabilityType.MentalSpells),
    ("Jed", 80, VulnerabilityType.AcidOrPotion),
    ("Blýskavá šipka", 70, VulnerabilityType.BlessedArrow)
};

Console.WriteLine("=== Útok na démona ===");
foreach (var (name, baseDmg, type) in attacks)
{
    double final = baseDmg * demon.GetDamageMultiplier(type);
    string status = demon.IsImmuneTo(type) ? "(IMUNNÍ)" :
                    demon.IsVulnerableTo(type) ? "(ZRANITELNÝ)" :
                    demon.IsResistantTo(type) ? "(ODOLNÝ)" : "(NORMÁLNÍ)";
    
    Console.WriteLine($"{name,-20} {baseDmg,3} → {final,6:F1} {status}");
}
```

**Výstup:**
```
=== Útok na démona ===
Normální meč          50 →   25.0 (ODOLNÝ)
Svěcený meč           50 →  100.0 (ZRANITELNÝ)
Svěcená voda          30 →   90.0 (ZRANITELNÝ)
Ohnivé kouzlo         60 →   36.0 (ODOLNÝ)
Mentální útok         40 →   12.0 (ODOLNÝ)
Jed                   80 →    0.0 (IMUNNÍ)
Blýskavá šipka        70 →  175.0 (ZRANITELNÝ)
```

---

## Příklad 5: Drak - Věkové stupně

```csharp
// Mladý drak - méně odolností
var youngDragon = new VulnerabilityProfil
{
    Vulnerabilities = new Dictionary<VulnerabilityType, double>
    {
        { VulnerabilityType.ElementalSpells, 1.25 }    // Mírně zranitelný vůči ledovým kouzlům
    },
    
    Resistances = new Dictionary<VulnerabilityType, double>
    {
        { VulnerabilityType.BluntForce, 0.75 },
        { VulnerabilityType.SharpForce, 0.8 }
    },
    
    Immunities = new HashSet<VulnerabilityType>
    {
        VulnerabilityType.ElementalForce                // Imunní vůči ohni
    }
};

// Dospělý drak - silnější odolnosti
var adultDragon = new VulnerabilityProfil
{
    Vulnerabilities = new Dictionary<VulnerabilityType, double>
    {
        // Žádné zranitelnosti
    },
    
    Resistances = new Dictionary<VulnerabilityType, double>
    {
        { VulnerabilityType.BluntForce, 0.5 },
        { VulnerabilityType.SharpForce, 0.6 },
        { VulnerabilityType.ElementalSpells, 0.7 },
        { VulnerabilityType.PhysicalSpells, 0.7 }
    },
    
    Immunities = new HashSet<VulnerabilityType>
    {
        VulnerabilityType.ElementalForce,
        VulnerabilityType.MentalSpells                  // Dospělý drak je imunní vůči mentálním útokům
    }
};

// Porovnání
int baseDamage = 100;
Console.WriteLine("=== Útok na draky ===");
Console.WriteLine($"Základní poškození: {baseDamage}");
Console.WriteLine();

var types = new[] { VulnerabilityType.SharpForce, VulnerabilityType.ElementalSpells, VulnerabilityType.MentalSpells };
foreach (var type in types)
{
    var info = type.GetInfo();
    Console.WriteLine($"{info?.Label}: {info?.Description}");
    Console.WriteLine($"  Mladý drak: {baseDamage * youngDragon.GetDamageMultiplier(type)}");
    Console.WriteLine($"  Dospělý drak: {baseDamage * adultDragon.GetDamageMultiplier(type)}");
    Console.WriteLine();
}
```

**Výstup:**
```
=== Útok na draky ===
Základní poškození: 100

B: Bodné a sečné útoky – zbraně, zuby, pařáty
  Mladý drak: 80
  Dospělý drak: 60

K: Elementální kouzla – oheň, voda, země, vzduch
  Mladý drak: 125
  Dospělý drak: 70

M: Mentální kouzla – hypnóza, strach, zmatení
  Mladý drak: 100
  Dospělý drak: 0
```

---

## Příklad 6: Použití GetInfo() - Výpis informací

```csharp
// Výpis všech typů zranitelností s popisem
Console.WriteLine("=== Všechny typy zranitelností ===");
foreach (VulnerabilityType type in Enum.GetValues<VulnerabilityType>())
{
    var info = type.GetInfo();
    if (info != null)
    {
        Console.WriteLine($"{info.Label}: {info.Description}");
    }
}
```

**Výstup:**
```
=== Všechny typy zranitelností ===
A: Fyzické útoky silou – údery, kop, pád, drtivé zbraně
B: Bodné a sečné útoky – zbraně, zuby, pařáty
C: Magické zbraně s démonem útoku
D: Zbraně proti konkrétním typům – stříbro, zlato, démon proti nemrtvým
E: Svěcená voda
F: Elementy – oheň, mráz
H: Kyselina, alchymistické lektvary
I: Hraničářská kouzla – skupina I (zastrašení, uzdravení, odstranění efektů)
J: Hraničářská kouzla – skupina II (blesky, šípy, zranění)
K: Elementální kouzla – oheň, voda, země, vzduch
L: Fyzická kouzla – tlak, šíp, blesk
M: Mentální kouzla – hypnóza, strach, zmatení
N: Blýskavá šipka – speciální kouzelný útok
O: Podrobování, jiné specifické efekty
P: Mentální útok – mentální šíp, síla vůle
```

---
